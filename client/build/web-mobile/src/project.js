require=function e(t,n,i){function o(c,r){if(!n[c]){if(!t[c]){var a="function"==typeof require&&require;if(!r&&a)return a(c,!0);if(s)return s(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(e){var n=t[c][1][e];return o(n||e)},u,u.exports,e,t,n,i)}return n[c].exports}for(var s="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({BtnIcon:[function(e,t,n){"use strict";cc._RF.push(t,"611ce4/eXZC4YMUSKRl0m+/","BtnIcon");cc.Class({extends:cc.Component,properties:{btn_selected:{default:null,type:cc.SpriteFrame},btn_unSelected:{default:null,type:cc.SpriteFrame}},start:function(){}});cc._RF.pop()},{}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"aaa0022uW1Ep5HRGsb1Tk5p","Config");var i=[{id:"like2ticket",value:"100;200;500;1000;2000"},{id:"score_rewards",value:"100;200;500;1000;2000"},{id:"battle_cost",value:"1"},{id:"start_time",value:"1518537600"},{id:"end_time",value:"1519142400"}],o={reward_1:{icon:"reward_1.png",name:"20元优惠卷"},reward_2:{icon:"reward_2.png",name:"50元优惠卷"},reward_3:{icon:"reward_3.png",name:"TF07口红"},reward_4:{icon:"reward_4.png",name:"纪梵希礼盒"},reward_5:{icon:"reward_5.png",name:"迪奥粉饼"},reward_6:{icon:"reward_6.png",name:"TF口红"}},s={1:{battle_id:"1",event_type:"null",event_value:"0",score:"10",tips:"无"},2:{battle_id:"2",event_type:"move",event_value:"2",score:"10",tips:"前进2步"},3:{battle_id:"3",event_type:"null",event_value:"0",score:"10",tips:"无"},4:{battle_id:"4",event_type:"move",event_value:"-3",score:"10",tips:"后退3步"},5:{battle_id:"5",event_type:"null",event_value:"0",score:"10",tips:"无"},6:{battle_id:"6",event_type:"reward",event_value:"reward_2",score:"10",tips:"恭喜获得50元代金卷"},7:{battle_id:"7",event_type:"null",event_value:"0",score:"10",tips:"无"},8:{battle_id:"8",event_type:"null",event_value:"0",score:"10",tips:"无"},9:{battle_id:"9",event_type:"move",event_value:"-4",score:"10",tips:"后退4步"},10:{battle_id:"10",event_type:"reward",event_value:"reward_1",score:"10",tips:"恭喜获得20元代金卷"},11:{battle_id:"11",event_type:"null",event_value:"0",score:"10",tips:"无"},12:{battle_id:"12",event_type:"null",event_value:"0",score:"10",tips:"无"},13:{battle_id:"13",event_type:"move",event_value:"4",score:"10",tips:"前进4步"},14:{battle_id:"14",event_type:"null",event_value:"0",score:"10",tips:"无"},15:{battle_id:"15",event_type:"null",event_value:"0",score:"10",tips:"无"},16:{battle_id:"16",event_type:"reward",event_value:"reward_3",score:"10",tips:"恭喜!"},17:{battle_id:"17",event_type:"null",event_value:"0",score:"10",tips:"无"},18:{battle_id:"18",event_type:"move",event_value:"1",score:"10",tips:"前进1步"},19:{battle_id:"19",event_type:"reward",event_value:"reward_1",score:"10",tips:"恭喜获得20元代金卷"},20:{battle_id:"20",event_type:"move",event_value:"3",score:"10",tips:"前进3步"},21:{battle_id:"21",event_type:"null",event_value:"0",score:"10",tips:"无"},22:{battle_id:"22",event_type:"reward",event_value:"reward_4",score:"10",tips:"恭喜!"},23:{battle_id:"23",event_type:"null",event_value:"0",score:"10",tips:"无"},24:{battle_id:"24",event_type:"move",event_value:"-5",score:"10",tips:"后退5步"},25:{battle_id:"25",event_type:"move",event_value:"1",score:"10",tips:"前进1步"},26:{battle_id:"26",event_type:"null",event_value:"0",score:"10",tips:"无"},27:{battle_id:"27",event_type:"move",event_value:"-4",score:"10",tips:"后退4步"},28:{battle_id:"28",event_type:"null",event_value:"0",score:"10",tips:"无"}};cc.Class({extends:cc.Component,properties:{},statics:{setting:null,reward:null,battle:null},onLoad:function(){D.config=this,D.config.setting=this.setting=i,D.config.reward=this.reward=o,D.config.battle=this.battle=s},start:function(){},getItemById:function(e,t){return e.filter(function(e){return e.id==t})}}),cc._RF.pop()},{}],ExternalLink:[function(e,t,n){"use strict";cc._RF.push(t,"52172NniSNNSZjTLc4H0KW+","ExternalLink"),cc.Class({extends:cc.Component,properties:{btn_link_android:{default:null,type:cc.Button},btn_link_apple:{default:null,type:cc.Button}},start:function(){},onBtnLinkAndroid:function(){window.open("http://www.baidu.com")},onBtnLinkApple:function(){window.open("http://www.qq.com")}}),cc._RF.pop()},{}],GameLogic:[function(e,t,n){"use strict";cc._RF.push(t,"d85e9q/1UhDaYljzPGla5UE","GameLogic"),cc.Class({extends:cc.Component,properties:{label_my_score:{default:null,type:cc.RichText},progress_bar:{default:null,type:cc.ProgressBar},label_summon_tips:{default:null,type:cc.RichText},btn_start:{default:null,type:cc.Button},label_summon_info:{default:null,type:cc.RichText},miku:{default:null,type:e("RoleCtrl")},tile:{default:null,type:cc.Node},label_pop:{default:null,type:cc.Label},dice:{default:null,type:sp.Skeleton},reward_show:{default:null,type:e("RewardShow")}},statics:{curStep:28,targetStep:28,diceCount:0,isMoving:!1,isMovingEnd:!0,everyLikeGainTicket:5},onLoad:function(){D.gameLogic=this,this.curStep=28,this.curStep=0,this.isMoving=!1,this.isMovingEnd=!0,this.dice=this.dice.getComponent("sp.Skeleton")},start:function(){},Init:function(){this.reward_show.hide(),this.refreshPanel(),this.refreshMikuPos()},movingCallback:function(){D.gameLogic.isMovingEnd=!0},update:function(e){if(this.isMoving&&this.isMovingEnd){if(0==this.diceCount){var t=D.config.battle[this.curStep];if(null==t||null==t.event_type||"null"==t.event_type)return this.miku.Idle(),this.isMoving=!1,this.btn_start.enabled=!0,void this.refreshPanel();if("move"==t.event_type)this.diceCount=parseInt(t.event_value),this.triggerEvent(t);else if("reward"==t.event_type)return this.miku.Idle(),this.isMoving=!1,this.triggerEvent(t),this.btn_start.enabled=!0,void this.refreshPanel()}this.diceCount>0?(this.curStep+=1,this.diceCount-=1):this.diceCount<0&&(this.curStep-=1,this.diceCount+=1),this.curStep=this.curStep>=28?this.curStep-28:this.curStep,this.curStep=this.curStep<=0?this.curStep+28:this.curStep;var n=this.tile.getChildByName("tile_"+this.curStep).getPosition();this.isMovingEnd=!1,this.miku.RunTo(n,this.movingCallback)}},setScore:function(e){var t="<color=#ffffff>我的积分:</c><color=#ffe178>"+e+"</color>";this.label_my_score.string=t;var n=e/2e3>1?1:e/2e3;this.progress_bar.progress=n},setSummonTips:function(e){var t="<color=#ffffff>再获得</c><color=#ffe178>"+(5-D.common.userInfo.user_be_liked%5)+"</color><color=#ffffff>票即可获得一次抽奖机会</c>";this.label_summon_tips.string=t},setSummonInfo:function(e){var t="<color=#000000>我的抽奖卷:</c><color=#ff0000>"+e+"</color><color=#000000>张</c>";this.label_summon_info.string=t},ctrlMiku:function(e,t,n){t=(t=t>=28?t-28:t)<=0?t+28:t;var i=this.tile.getChildByName("tile_"+t).getPosition();"idle"==e?this.miku.Idle():"run"==e&&this.miku.RunTo(i)},refreshPanel:function(){cc.log("D.common.userInfo.user_score_a:"+D.common.userInfo.user_score_a),cc.log("D.common.userInfo.user_tickets:"+D.common.userInfo.user_tickets),this.setScore(D.common.userInfo.user_score_a),this.setSummonInfo(D.common.userInfo.user_tickets),this.setSummonTips(D.common.userInfo.user_tickets)},refreshMikuPos:function(){this.curStep=D.common.userInfo.user_step;var e=this.tile.getChildByName("tile_"+this.curStep).getPosition();this.miku.node.setPosition(e)},triggerEvent:function(e){this.label_pop.string=e.tips,cc.log("----triggerEvent:"),"reward"==e.event_type&&this.reward_show.show(e.event_value)},onBtnSummon:function(){D.common.userInfo.user_tickets>0?(this.btn_start.enabled=!1,D.common.Summon(this.onRoll.bind(this))):alert("您的抽奖卷不足")},onRoll:function(e){var t=cc.callFunc(function(){this.dice.setAnimation(0,"dice"+e,!1)}.bind(this)),n=cc.delayTime(1),i=cc.callFunc(function(){D.gameLogic.diceCount=parseInt(e),cc.log("callback:"+D.gameLogic.diceCount),D.gameLogic.targetStep+=e,D.gameLogic.isMoving=!0}.bind(this)),o=cc.callFunc(function(){}.bind(this)),s=cc.sequence(t,n,i,o);this.node.runAction(s)}}),cc._RF.pop()},{RewardShow:"RewardShow",RoleCtrl:"RoleCtrl"}],GamePage:[function(e,t,n){"use strict";cc._RF.push(t,"ba5f7FYUY1E14l/pPV68Zrn","GamePage"),cc.Class({extends:cc.Component,properties:{init:!1,scrollDone:!1,bHavePhoto:!1},onLoad:function(){this.init=!0},start:function(){this.init&&this.bHavePhoto&&!this.scrollDone&&(this.scrollDone=!0,this.node.getComponent("cc.PageView").scrollToPage(1))},OnLoginNotify:function(e){this.bHavePhoto=e,this.init&&e&&!this.scrollDone&&(this.scrollDone=!0,this.node.getComponent("cc.PageView").scrollToPage(1))}}),cc._RF.pop()},{}],Globals:[function(e,t,n){"use strict";cc._RF.push(t,"d6ba3aO3PVFDY4h0XQUp6BR","Globals"),window.D={common:null,config:null,gameLogic:null,photoWall:null},cc._RF.pop()},{}],HelloWorld:[function(e,t,n){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{spine_1:{default:null,type:sp.Skeleton},spine_2:{default:null,type:sp.Skeleton},next_node:{default:null,type:cc.Node},touch_node:{default:null,type:cc.Node},spine_1_time:4.5,spine_2_time:2,spine_3_time:1,propagate:{default:!1},touch_count:0},onLoad:function(){this.propagate=!0,this.isPlaySpine2=!1,this.animations=new Array(17,32,50,65,83,102,117,150),this.spine_1=this.spine_1.getComponent("sp.Skeleton"),this.spine_2=this.spine_2.getComponent("sp.Skeleton");this.touch_node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan.bind(this),this.node),this.touch_node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded.bind(this),this.node)},onTouchBegan:function(e){this.propagate&&(cc.log("TOUCH_START"),e.stopPropagation())},onTouchEnded:function(e){if(this.propagate){if(cc.log("TOUCH_END"),this.touch_count>=this.animations.length-1&&0==this.isPlaySpine2)return this.isPlaySpine2=!0,void this.playNextAnimation();this.trackEntry.trackTime=this.animations[this.touch_count]/30,this.spine_1.timeScale=1,this.touch_count+=1,e.stopPropagation()}},playNextAnimation:function(){var e=cc.callFunc(function(){this.spine_1.node.active=!1,this.spine_2.node.active=!0,this.spine_2.setAnimation(0,"animation",!1)}.bind(this)),t=cc.delayTime(this.spine_2_time),n=cc.callFunc(function(){this.next_node.active=!0,this.propagate=!1,this.touch_node.active=!1}.bind(this)),i=cc.sequence(e,t,n);this.node.runAction(i)},update:function(e){this.touch_count>this.animations.length||this.trackEntry.trackTime>this.animations[this.touch_count]/30&&(this.spine_1.timeScale=0)},start:function(){this.next_node.active=!1,this.spine_2.node.active=!1,this.spine_1.node.active=!0,this.trackEntry=this.spine_1.setAnimation(0,"animation",!1)},Init:function(e){e&&(this.touch_count=this.animations.length+1,this.spine_1.timeScale=0,this.spine_2.timeScale=0,this.propagate=!1,this.touch_node.active=!1)}}),cc._RF.pop()},{}],Http:[function(e,t,n){"use strict";cc._RF.push(t,"61ebc++7MZF57Ae9widmWNC","Http");var i=cc.Class({extends:cc.Component,properties:{waiting:{default:null,type:cc.Node}},statics:{init:null,url:null,port:null},onLoad:function(){i.init=this,cc.log("http init"),this.url="",this.port=""},getWithUrl:function(e,t){this.waiting.active=!0;var n=e,i=cc.loader.getXMLHttpRequest();cc.log("Status: Send Get Request to "+n),i.open("GET",n,!0),i.setRequestHeader("Access-Control-Allow-Origin","*"),i.setRequestHeader("Access-Control-Allow-Headers","Content-Type, Content-Length, Authorization, Accept, X-Requested-With, X-HTTP-Method-Override"),i.setRequestHeader("Access-Control-Allow-Methods","PUT,POST,GET,DELETE,OPTIONS"),i.setRequestHeader("X-Powered-By","Jetty");i.onreadystatechange=function(){if(this.waiting.active=!1,cc.log("request.status:"+i.status),4==i.readyState&&200==i.status)e=i.responseText,t&&t(!0,e);else if(4==i.readyState&&200!=i.status){var e=i.responseText;t&&t(!1,e)}}.bind(this),i.send()}});cc._RF.pop()},{}],PhotoWall:[function(e,t,n){"use strict";cc._RF.push(t,"edca6Nn//xBLqJX/SgJ66jy","PhotoWall"),cc.Class({extends:cc.Component,properties:{btn_rank:{default:null,type:cc.Button},btn_self:{default:null,type:cc.Button},tab_rank:{default:null,type:cc.Node},tab_self:{default:null,type:cc.Node},self_photo:{default:null,type:cc.Sprite},btn_share:{default:null,type:cc.Button},btn_input:{default:null,type:cc.Button},label_nick:{default:null,type:cc.Label},label_like:{default:null,type:cc.RichText},self_info:{default:null,type:cc.Node},edit_nick:{default:null,type:cc.EditBox},edit_phone:{default:null,type:cc.EditBox},edit_address:{default:null,type:cc.EditBox},btn_commit:{default:null,type:cc.Button},btn_upload_photo:{default:null,type:cc.Button},rank_page:{default:null,type:e("RankPage")},share_node:{default:null,type:cc.Node}},onLoad:function(){D.photoWall=this},start:function(){},Init:function(){this.onBtnTabRank(),this.refreshPanel(),this.rank_page.Init()},refreshPanel:function(){if(this.label_nick.string=D.common.userInfo.user_name,this.label_like.string="<color=#000000>获赞数:</c><color=#ff0000>"+D.common.userInfo.user_be_liked+"</color>",void 0!=D.common.userInfo.user_photo&&""!=D.common.userInfo.user_photo){cc.textureCache.addImage(D.common.userInfo.user_photo,function(e){if(null!=e&&void 0!=e){this.self_photo.spriteFrame=new cc.SpriteFrame(e);var t=366/e.width,n=488/e.height,i=Math.min(t,n);this.self_photo.node.scaleX=i,this.self_photo.node.scaleY=i}else cc.log("add image error")}.bind(this))}},onBtnTabRank:function(){this.tab_rank.active=!0,this.tab_self.active=!1,this.self_info.active=!1,this.btn_rank.getComponent("cc.Sprite").spriteFrame=this.btn_rank.getComponent("BtnIcon").btn_selected,this.btn_rank.height=62,this.btn_self.getComponent("cc.Sprite").spriteFrame=this.btn_self.getComponent("BtnIcon").btn_unSelected,this.btn_self.height=54},onBtnTabSelf:function(){this.tab_rank.active=!1,this.tab_self.active=!0,this.self_info.active=!1,this.btn_rank.getComponent("cc.Sprite").spriteFrame=this.btn_rank.getComponent("BtnIcon").btn_unSelected,this.btn_rank.height=54,this.btn_self.getComponent("cc.Sprite").spriteFrame=this.btn_self.getComponent("BtnIcon").btn_selected,this.btn_self.height=62,D.common.getUserInfo(this.refreshPanel.bind(this))},onBtnInputInfo:function(){this.edit_nick.string=D.common.userInfo.user_name,this.edit_phone.string=D.common.userInfo.phone_no,this.edit_address.string=D.common.userInfo.address,this.self_info.active=!0},onBtnCommitInfo:function(){this.self_info.active=!1;var e=this.edit_nick.string,t=this.edit_phone.string,n=this.edit_address.string;D.common.updateUserInfo(e,t,n)},onBtnShare:function(){this.share_node.active=!0},onBtnShareClose:function(){this.share_node.active=!1},onEditNickEnd:function(e){cc.log("onEditNickEnd:"+this.edit_nick.string)},onEditPhotoEnd:function(e){cc.log("onEditPhotoEnd:"+this.edit_phone.string)},onEditAddressEnd:function(e){cc.log("onEditAddressEnd:"+this.edit_address.string)},onUploadPhoto:function(){window.location.href="upload/index.html"},refreshRank:function(){}}),cc._RF.pop()},{RankPage:"RankPage"}],RankItem:[function(e,t,n){"use strict";cc._RF.push(t,"ae8e2UH/XpMbLVINYsSotmJ","RankItem"),cc.Class({extends:cc.Component,properties:{photo:{default:null,type:cc.Sprite},rank_bg:{default:null,type:cc.Node},label_rank:{default:null,type:cc.Label},label_nick:{default:null,type:cc.Label},label_like:{default:null,type:cc.RichText},btn_like:{default:null,type:cc.Sprite},first:{default:null,type:cc.Node},second:{default:null,type:cc.Node},third:{default:null,type:cc.Node},user_no:0,rankData:null},start:function(){},refresh:function(e,t){if(null!=t&&(this.rankData=t,1==e?(this.first.active=!0,this.second.active=!1,this.third.active=!1,this.rank_bg.active=!1):2==e?(this.first.active=!1,this.second.active=!0,this.third.active=!1,this.rank_bg.active=!1):3==e?(this.first.active=!1,this.second.active=!1,this.third.active=!0,this.rank_bg.active=!1):(this.first.active=!1,this.second.active=!1,this.third.active=!1,this.rank_bg.active=!0,this.label_rank.string=""+e),this.label_nick.string=t.user_name,this.label_like.string="<color=#000000>点赞数:</c><color=#ff0000>"+t.user_be_liked+"</color>",this.user_no=t.user_no,this.RefreshLikeBtn(),void 0!=t.user_photo&&""!=t.user_photo)){cc.textureCache.addImage(t.user_photo,function(e){if(null!=e&&void 0!=e){this.photo.spriteFrame=new cc.SpriteFrame(e);var t=178/e.width,n=251/e.height,i=Math.min(t,n);this.photo.node.scaleX=i,this.photo.node.scaleY=i}else cc.log("add image error")}.bind(this))}},OnLike:function(){D.common.LikeYou(this.user_no,function(){this.label_like.string="<color=#000000>点赞数:</c><color=#ff0000>"+(this.rankData.user_be_liked+1)+"</color>",this.RefreshLikeBtn()}.bind(this))},RefreshLikeBtn:function(){if(D.common.isEmptyStr(D.common.userInfo.user_likes_no))this.btn_like.getComponent("cc.Sprite").spriteFrame=this.btn_like.getComponent("BtnIcon").btn_unSelected;else{var e=JSON.parse(D.common.userInfo.user_likes_no),t=""+this.user_no;for(var n in e){if(t==n){this.btn_like.getComponent("cc.Sprite").spriteFrame=this.btn_like.getComponent("BtnIcon").btn_selected;break}this.btn_like.getComponent("cc.Sprite").spriteFrame=this.btn_like.getComponent("BtnIcon").btn_unSelected}}}}),cc._RF.pop()},{}],RankPage:[function(e,t,n){"use strict";cc._RF.push(t,"4e3d2Z/6+FE+5JsTmqCBMh7","RankPage"),cc.Class({extends:cc.Component,properties:{grid_prefab:{default:null,type:cc.Prefab},pageWnd:{default:null,type:cc.Prefab},pageIndex:0,curRankFrom:0,curRankEnd:6,pageLimit:6,curTotal:1},onLoad:function(){this.pageWnd=this.getComponent("cc.PageView")},start:function(){},Init:function(){this.pageWnd.setCurrentPageIndex(0),this.onPageEvent(this.pageWnd,cc.PageView.EventType.PAGE_TURNING)},addPage:function(e){if(!(this.curTotal<e)){this.curTotal+=1;var t=cc.instantiate(this.grid_prefab);this.pageWnd.addPage(t)}},refreshGrid:function(e,t){if(null!=t&&void 0!=t&&0!=t.length){for(var n=this.pageWnd.getCurrentPageIndex(),i=this.pageWnd.getPages()[n],o=6*n,s=0;s<6;s++){var c=!1;s<t.length&&(this.curRankEnd=o+s,c=!0);var r=s<t.length?t[s]:null;this.refreshRankItem(c,i,"node_"+s,o+s+1,r)}7==t.length&&n+1==this.pageWnd.getPages().length&&this.addPage(n+1)}},refreshRankItem:function(e,t,n,i,o){var s=t.getChildByName(n).getChildByName("rank_item");s.active=e,e&&s.getComponent("RankItem").refresh(i,o)},OnPagePrevious:function(){0!=this.pageIndex&&(this.pageIndex-=1,this.curRankFrom=6*this.pageIndex,D.common.GetRank(this.curRankFrom,this.pageLimit,this.refreshGrid.bind(this)))},OnPageNext:function(){16!=this.pageIndex&&(this.curRankEnd<this.curRankFrom+5||(this.pageIndex+=1,this.curRankFrom=6*this.pageIndex,D.common.GetRank(this.curRankFrom,this.pageLimit+1,this.refreshGrid.bind(this))))},onPageEvent:function(e,t){if(t===cc.PageView.EventType.PAGE_TURNING){var n=e.getCurrentPageIndex();console.log("当前所在的页面索引:"+n),this.curRankFrom=6*n,this.pageIndex-n<=0?D.common.GetRank(this.curRankFrom,this.pageLimit+1,this.refreshGrid.bind(this)):D.common.GetRank(this.curRankFrom,this.pageLimit,this.refreshGrid.bind(this)),this.pageIndex=n}}}),cc._RF.pop()},{}],RewardIcons:[function(e,t,n){"use strict";cc._RF.push(t,"c65faj6HhtJLJwxZqrj5JGm","RewardIcons"),cc.Class({extends:cc.Component,properties:{reward_1:{default:null,type:cc.SpriteFrame},reward_2:{default:null,type:cc.SpriteFrame},reward_3:{default:null,type:cc.SpriteFrame},reward_4:{default:null,type:cc.SpriteFrame},reward_5:{default:null,type:cc.SpriteFrame},reward_6:{default:null,type:cc.SpriteFrame}},start:function(){},getIcon:function(e){return"reward_1"==e?this.reward_1:"reward_2"==e?this.reward_2:"reward_3"==e?this.reward_3:"reward_4"==e?this.reward_4:"reward_5"==e?this.reward_5:"reward_6"==e?this.reward_6:this.reward_1}}),cc._RF.pop()},{}],RewardShow:[function(e,t,n){"use strict";cc._RF.push(t,"6a91bLp7dZEBLOQJ/61nz9G","RewardShow"),cc.Class({extends:cc.Component,properties:{reward_show_icon:{default:null,type:cc.Sprite},reward_show_label:{default:null,type:cc.Label}},start:function(){},show:function(e){this.node.active=!0;var t=D.config.reward[e];this.reward_show_icon.spriteFrame=this.getComponent("RewardIcons").getIcon(e),this.reward_show_label.string=t.name},hide:function(){this.node.active=!1},onBtnOk:function(){this.node.active=!1}}),cc._RF.pop()},{}],RoleCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"4c94fFmbXtG4oIXKon/37H+","RoleCtrl");cc.Class({extends:cc.Component,editor:{requireComponent:sp.Skeleton},properties:{},onLoad:function(){this.spine=this.getComponent("sp.Skeleton");this.Idle()},start:function(){},Idle:function(){this.node.setScaleX(1),this.spine.setAnimation(0,"miku_idle",!0)},RunTo:function(e,t){this.spine=this.getComponent("sp.Skeleton");this.spine.setAnimation(0,"miku_run",!0);var n=this.node.getPosition(),i=cc.pSub(e,n);i.x>10?this.node.setScaleX(1):i.x<-10&&this.node.setScaleX(-1);var o=cc.moveTo(1,e),s=cc.callFunc(t),c=cc.sequence(o,s);this.node.runAction(c)}});cc._RF.pop()},{}],TouchPropagate:[function(e,t,n){"use strict";cc._RF.push(t,"5d6f8Nh+H5NMpQLgCUvvNZT","TouchPropagate"),cc.Class({extends:cc.Component,properties:{propagate:{default:!1}},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.propagate&&(cc.log("TOUCH_START"),e.stopPropagation())},this.node),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.propagate&&(cc.log("TOUCH_END"),e.stopPropagation())},this.node)},start:function(){},onEnable:function(){this.propagate=!0},onDisable:function(){this.propagate=!1}}),cc._RF.pop()},{}],common:[function(e,t,n){"use strict";cc._RF.push(t,"16a9a9XREZK5qFdRa5ig/vl","common");var i=e("Http");cc.Class({extends:cc.Component,properties:{userInfo:"",userUuid:"",game_pageview:{default:null,type:cc.Node},helloworld_node:{default:null,type:cc.Node}},uuidv4:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})},onLoad:function(){D.common=this,this.signin()},update:function(e){},getUuid:function(){var e=localStorage.getItem("uuid");return this.isEmptyStr(e)?this.userUuid=this.uuidv4():this.userUuid=e,this.userUuid},signin:function(){var e="/signin?uuid="+this.getUuid();cc.log(e);i.init.getWithUrl(e,function(e,t){if(cc.log("response:"+t),e){var n=JSON.parse(t);if(200==n.ReturnCode){var i=localStorage.getItem("uuid");this.isEmptyStr(i)&&localStorage.setItem("uuid",this.userUuid),this.userInfo=n.User,D.gameLogic.Init(),D.photoWall.Init();var o=this.isEmptyStr(this.userInfo.user_photo);this.helloworld_node.getComponent("HelloWorld").Init(!o),this.game_pageview.getComponent("GamePage").OnLoginNotify(!o)}else alert("error code:"+n.ReturnCode)}}.bind(this))},getUserInfo:function(e){var t="/getuserinfo";cc.log(t);i.init.getWithUrl(t,function(t,n){if(cc.log("response:"+n),t){var i=JSON.parse(n);200==i.ReturnCode?(this.userInfo=i.User,e()):alert("error code:"+i.ReturnCode)}}.bind(this))},updateUserInfo:function(e,t,n){var o="/updateuserinfo";null!=e&&""!=e&&(o+="&&user_name="+e),null!=t&&""!=t&&(o+="&&phone_no="+t),null!=n&&""!=n&&(o+="&&address="+n),cc.log(o);i.init.getWithUrl(o,function(e,t){if(cc.log("response:"+t),e){var n=JSON.parse(t);200==n.ReturnCode?(this.isEmpty(n.User.user_name)||(this.userInfo.user_name=n.User.user_name),this.isEmpty(n.User.phone_no)||(this.userInfo.phone_no=n.User.phone_no),this.isEmpty(n.User.address)||(this.userInfo.address=n.User.address)):alert("error code:"+n.ReturnCode)}}.bind(this))},Summon:function(e){i.init.getWithUrl("/startlottery",function(t,n){if(cc.log("response:"+n),t){var i=JSON.parse(n);if(200==i.ReturnCode){this.userInfo=i.User;var o=i.Dice;e(o)}else alert("error code:"+i.ReturnCode)}}.bind(this))},GetRank:function(e,t,n){var o="/rank?start="+e+"&&limit="+t;i.init.getWithUrl(o,function(e,t){if(e){var i=JSON.parse(t);if(200==i.ReturnCode){var o=i.Rank;n("success",o)}else n("error")}}.bind(this))},LikeYou:function(e,t){var n="/like?user_no="+e;i.init.getWithUrl(n,function(e,n){if(e){var i=JSON.parse(n);200==i.ReturnCode?(this.userInfo=i.User,t()):2001==i.ReturnCode?alert("被您点赞的小伙伴消失在异次元中了!"):2005==i.ReturnCode?alert("今日您的三次点赞机会已经全部用光了,明天再来吧~"):2006==i.ReturnCode&&alert("您已经为该小伙伴点赞了~")}}.bind(this))},isEmpty:function(e){return null==e||void 0==e},isEmptyStr:function(e){return null==e||void 0==e||""==e}}),cc._RF.pop()},{Http:"Http"}]},{},["BtnIcon","Config","ExternalLink","GameLogic","GamePage","Globals","HelloWorld","Http","PhotoWall","RankItem","RankPage","RewardIcons","RewardShow","RoleCtrl","TouchPropagate","common"]);